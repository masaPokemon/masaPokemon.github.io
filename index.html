<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>クッキーとURLパラメータをFirebaseに送信</title>
    <script src="https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-database.js"></script>
</head>
</body>
    <div id="message">
      <p> データベース (database) </p>
      <li id="print_chats"></li>

      <ul>
        <li id="print_name"></li>
        <li id="print_price"></li>
      </ul>

      <p> フォーム (form) </p>
      <ul>
        <li> name: <input type="text" name="" id="my_name"></li>
        <li> price: <input type="text" name="" id="my_price"></li>
      </ul>
      <p>
        <a onclick="setdata()">データをセット (set data)</a>
      </p>
    </div>
  <script>
        // Firebaseの設定（自分のプロジェクトの情報に変更してください）
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyBBbo6xLhmufq0LiFaw8bKTDQ9JOthd0HY",
            authDomain: "lets-go-to-school-server.firebaseapp.com",
            databaseURL: "https://lets-go-to-school-server-default-rtdb.firebaseio.com",
            projectId: "lets-go-to-school-server",
            storageBucket: "lets-go-to-school-server.appspot.com",
            messagingSenderId: "149825716219",
            appId: "1:149825716219:web:0ef095d5d77ab10b29155e",
            measurementId: "G-SJJ81FP9VS"
        };

        // Firebaseの初期化
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
    </script>
    <script>
      var db = firebase.database();
      var myChatAll = db.ref("/cookie/session/all");
      var chats = db.ref("/cookie/session");

      function setdata(){
        var my_name = location.search;
        var my_price = "";
        myChatAll.set({title:"クッキー", cookie:my_name, price:my_price});
      }

      myChatAll.on("value", function(snap) {
        document.getElementById("print_name").innerText = "name: " + snap.val().cookie;
        document.getElementById("print_price").innerText = "price: " + snap.val().price;
      });

      chats.on("value", function(snap) {
        document.getElementById("print_chats").innerText = "chats: " + snap;
      });
      setdata();
    </script>
  </body>
</html>
